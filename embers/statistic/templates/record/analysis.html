
{% extends 'base.html' %}
{% load static %}



{% block content %}
<link href="{% static 'css/bootstrap-table.min.css' %}" rel="stylesheet" type="text/css" media="all"/>

    <section class= "pd-0">
        <div class= "container">

            <div class="p-0 text-dark rounded bg-white">
                
                <h1 class="h2">analysis</h1>
                
                <h3>the quantity of total owned stock</h3>
                <div id="chart" style="width: 600px;height:400px;"></div>
                <h3>the value of owned stock</h3>
                <div id="bar" style="width: 600px;height:400px;"></div>
            </div>
       </div>
    
    </section>
  
      
{% endblock %}


{% block script_content %}

<script type="text/javascript" src="{% static 'js/echarts-en.min.js' %}"></script>
    <script type="text/javascript">
       
        var myChart = echarts.init(document.getElementById('chart'), 'light');
        var unit = {{ account.unit| safe}};
        
        myChart.setOption({
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b} : {c} ({d}%)'
            },
             
            legend: {
                type: 'scroll',
                orient: 'vertical',
                left: 'left',
            },
            series : [
                {
                    name: 'owned quantity',
                    type: 'pie',    
                    radius: '70%',  
                    data: unit
                }
            ]
        });
        
        var myBar = echarts.init(document.getElementById('bar'));
        var value_data = {{ account.value|safe }};
       
        var option = {
                legend: {},
                tooltip: {},
                dataset: {
                    
                    dimensions: ['stockname', 'owned_value', 'current_value'],
                    source: value_data
                },
                xAxis: {type: 'category'},
                yAxis: {},
                series: [
                    {type: 'bar'},
                    
                    {type: 'bar'}
                ]
            };

        // 
        myBar.setOption(option);
     </script>
{% endblock %}