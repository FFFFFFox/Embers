
{% extends 'base.html' %}
{% load static %}



{% block content %}
<link href="{% static 'css/bootstrap-table.min.css' %}" rel="stylesheet" type="text/css" media="all"/>

    <section class= "pd-0">
        <div class= "container">

            <div class="p-0 text-dark rounded bg-white">
                
                <h1 class="h2">statistic</h1>
                <div id="chart" style="width: 1150px;height:600px;"></div>
                <div id="bar" style="width: 1000px;height:600px;margin: 0 auto"></div>
                <div id="bar_diff" style="width: 1000px;height:600px;margin: 0 auto"></div>
            </div>
       </div>
    
    </section>
  
      
{% endblock %}


{% block script_content %}

<script type="text/javascript" src="{% static 'js/echarts-en.min.js' %}"></script>
    <script type="text/javascript">
        var account = {{ account| safe}};

        var myChart = echarts.init(document.getElementById('chart'));
        
        myChart.setOption({
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b} : {c} ({d}%)'
            },
             
            legend: {
                type: 'scroll',
                orient: 'vertical',
                left: 'right',
            },
            dataset: {
                source: account
            },
            title: [{
                text: 'the total owned stock',
                left: 'center'
                }, {
                    subtext: 'the total quantity of owned stock',
                    left: '25%',
                    top: '75%',
                    textAlign: 'center'
                }, {
                subtext: 'the total value of owned stock',
                left: '70%',
                top: '75%',
                textAlign: 'center'
            }],
            series : [
                {
                    name: 'owned quantity',
                    type: 'pie',    
                    radius: '50%',  
                    center: ['25%', '40%'],
                    encode: {
                        itemName: 'stockname',
                        value: 'unit'
                    }
                },
                {
                    name: 'owned value',
                    type: 'pie',    
                    radius: '50%',  
                    center: ['70%', '40%'],
                    encode: {
                        itemName: 'stockname',
                        value: 'owned_value'
                    }
                }
                
            ]
        });
        
        var myBar = echarts.init(document.getElementById('bar'));

        var option = {
            
               tooltip: {
                    trigger: 'axis',
                    axisPointer: {          
                        type: 'shadow'          
                    }
                },
                title: {
                    text: 'the value of each stock',
                    left: 'center'},
                legend: {
                    type: 'scroll',
                    orient: 'vertical',
                    left: 'right',
                },
                dataset: {
                    
                    dimensions: ['stockname', 'owned_value', 'current_value'],
                    source: account
                },
                yAxis: {type: 'category'},
                xAxis: {},
                series: [
                    {type: 'bar'},
                    
                    {type: 'bar'}
                ]
            };

        // 
        myBar.setOption(option);

        var myBar_diff = echarts.init(document.getElementById('bar_diff'));

        var option_diff = {
            
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {          
                        type: 'shadow'          
                    }
                },
                title: {
                    text: 'the profit or loss of each stock',
                    left: 'center'},
                legend: {
                    type: 'scroll',
                    orient: 'vertical',
                    left: 'right',
                },
                dataset: {
                    
                    dimensions: ['stockname', 'profit','loss'],
                    source: account
                },
                yAxis: {type: 'category'},
                xAxis: {},
                series: [
                    {
                        type: 'bar',
                        stack: 'value'
                    },
                    {
                        type: 'bar',
                        stack: 'value'
                    }
                ]
            };

        // 
        myBar_diff.setOption(option_diff);

     </script>
{% endblock %}